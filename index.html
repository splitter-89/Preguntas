<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trivial de Preguntas</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            text-align: center;
        }

        #trivial-container {
            margin: 50px auto;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 350px;
        }

        h1 {
            color: #333;
        }

        .question {
            font-size: 18px;
            margin-bottom: 15px;
        }

        .options button {
            display: block;
            width: 100%;
            margin: 5px 0;
            padding: 10px;
            border: none;
            border-radius: 5px;
            background-color: #007BFF;
            color: white;
            cursor: pointer;
            transition: background 0.3s;
        }

        .options button:hover {
            background-color: #0056b3;
        }

        .correct {
            background-color: #28a745 !important;
        }

        .incorrect {
            background-color: #dc3545 !important;
        }

        #next-button, #restart-button {
            display: none;
            margin-top: 10px;
            padding: 10px;
            width: 100%;
            background-color: #28a745;
        }

        #next-button:hover, #restart-button:hover {
            background-color: #218838;
        }

        #score {
            margin-top: 15px;
            font-weight: bold;
        }

        #num-questions {
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div id="trivial-container">
        <h1>Trivial de Preguntas</h1>
        <div>
            <label for="num-questions"></label>
            <input type="number" id="num-questions" min="1" max="10" value="5">
            <button id="start-button">Comenzar</button>
        </div>
        <div id="question" class="question"></div>
        <div id="options" class="options"></div>
        <button id="next-button">Siguiente</button>
        <div id="score"></div>
        <button id="restart-button">Reiniciar</button>
    </div>

    <script>
        let questions = [
            { question: "¿Precio billete sencillo?", options: ["2.55€", "2.65€", "2.60€", "2.70€"], answer: "2.65€" },
            { question: "¿Precio billete bus turístic 24 horas?", options: ["33€", "30€", "30.50€", "29.45€"], answer: "33€" },
            { question: "¿Dónde está la oficina de objetos perdidos de TMB?", options: ["Sagrera", "Sagrada Familia", "Diagonal", "Universidad"], answer: "Sagrada Familia" },
            { question: "¿Presidente/ta de TMB?", options: ["Laia Bonet", "Rosa Alarcón", "Xavier Flores", "Antonio Balmón"], answer: "Laia Bonet" },
            { question: "¿Vicepresidente/ta de TMB?", options: ["Laia Bonet", "Rosa Alarcón", "Xavier Flores", "Antonio Balmón"], answer: "Antonio Balmón" },
            { question: "¿Precio Tarjeta T-Usual 1 zona?", options: ["23€", "24€", "21€", "22€"], answer: "22€" },
            { question: "¿La línea 136 a que CON pertenece?", options: ["Zona Franca", "Horta", "Triangle"], answer: "Triangle" },
            { question: "¿Que línea ha tenido más validaciones en laborables en 2024?", options: ["206", "208", "204"], answer: "206" },
            { question: "¿Que líneas pasan por Albert Llanas?", options: ["219 y 24", "219 y 39", "219 y 221"], answer: "219 y 24" },
            { question: "¿Que líneas pasan por el Puente del trabajo", options: ["229 y 231", "208 y 231", "233 y 229"], answer: "229 y 231" },
            { question: "¿Dime una línea que circule por diagonal", options: ["7", "39", "223"], answer: "7" },
            { question: "¿Dime una línea que circule por Av. Sarrià", options: ["6", "33", "27"], answer: "6" },
            { question: "¿Dime una línea que circule por Vía Barcino", options: ["231", "233", "131"], answer: "231" },
            { question: "¿Dime una línea que circule por Marina-Ribes", options: ["6", "221", "54","Todas las respuestas"], answer: "Todas las respuestas" },
            { question: "¿La línea 33 circula por Rambla Prim", options: ["Si", "No", "Esa calle no existe"], answer: "Si" },
            { question: "¿La línea 136 circula por Vía Trajana", options: ["Si", "No", "Esa calle no existe"], answer: "Si" },
            { question: "¿Dime una línea que circule por Cristobal de moura", options: ["233", "214", "Todas las anteriores"], answer: "Todas las anteriores" },
        ];

        // Mezclar preguntas aleatoriamente
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        shuffle(questions);

        let currentQuestionIndex = 0;
        let correctAnswers = 0;
        let incorrectAnswers = 0;
        let selectedQuestions = [];

        function loadQuestion() {
            const currentQuestion = selectedQuestions[currentQuestionIndex];
            document.getElementById("question").innerText = `Pregunta: ${currentQuestion.question}`;
            const optionsContainer = document.getElementById("options");
            optionsContainer.innerHTML = '';

            currentQuestion.options.forEach(option => {
                const button = document.createElement("button");
                button.innerText = option;
                button.onclick = () => checkAnswer(button, option);
                optionsContainer.appendChild(button);
            });

            document.getElementById("next-button").style.display = "none";
            document.getElementById("score").style.display = "none";
        }

        function checkAnswer(button, selectedOption) {
            const currentQuestion = selectedQuestions[currentQuestionIndex];
            const buttons = document.querySelectorAll(".options button");

            // Deshabilitar todos los botones para que no se pueda hacer clic después de elegir
            buttons.forEach(btn => btn.disabled = true);

            if (selectedOption === currentQuestion.answer) {
                button.classList.add("correct");
                correctAnswers++;
            } else {
                button.classList.add("incorrect");
                // Resaltar en verde la respuesta correcta
                buttons.forEach(btn => {
                    if (btn.innerText === currentQuestion.answer) {
                        btn.classList.add("correct");
                    }
                });
                incorrectAnswers++;
            }

            currentQuestionIndex++;
            if (currentQuestionIndex < selectedQuestions.length) {
                document.getElementById("next-button").style.display = "block";
            } else {
                showScore();
            }
        }

        function showScore() {
            document.getElementById("question").innerText = "Juego terminado";
            document.getElementById("options").innerHTML = "";
            document.getElementById("score").innerHTML = `✅ Correctas: ${correctAnswers} <br> ❌ Incorrectas: ${incorrectAnswers}`;
            document.getElementById("score").style.display = "block";
            document.getElementById("restart-button").style.display = "block";
        }

        document.getElementById("start-button").onclick = function() {
            const numQuestions = parseInt(document.getElementById("num-questions").value);
            selectedQuestions = questions.slice(0, numQuestions);
            currentQuestionIndex = 0;
            correctAnswers = 0;
            incorrectAnswers = 0;
            document.getElementById("start-button").style.display = "none";
            document.getElementById("num-questions").style.display = "none";
            loadQuestion();
        };

        document.getElementById("next-button").onclick = loadQuestion;
        document.getElementById("restart-button").onclick = function() {
            shuffle(questions); // Volver a mezclar preguntas
            currentQuestionIndex = 0;
            correctAnswers = 0;
            incorrectAnswers = 0;
            document.getElementById("restart-button").style.display = "none";
            document.getElementById("start-button").style.display = "block";
            document.getElementById("num-questions").style.display = "block";
            document.getElementById("question").innerText = "";
            document.getElementById("options").innerHTML = "";
            document.getElementById("score").innerHTML = "";
        };
    </script>
</body>
</html>
